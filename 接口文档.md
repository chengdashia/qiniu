#### 接口文档



**1. /api/submit-text**

**请求方式**

```
POST /api/submit-text
Content-Type: application/json
```

**请求 JSON 示例**

```
{
  "prompt": "一只穿着铠甲的机械龙，金属质感，蒸汽朋克风格",
  "enable_pbr": true,
  "face_count": 120000,
  "generate_type": "Normal",
  "polish": true
}
```

**字段说明**

| **字段**      | **类型** | **描述**                                     |
| ------------- | -------- | -------------------------------------------- |
| prompt        | string   | 原始提示词（必填）                           |
| enable_pbr    | bool     | 是否启用 PBR 材质（可选）                    |
| face_count    | int64    | 面数（可选，40000-500000）                   |
| generate_type | string   | Normal / LowPoly / Geometry / Sketch（可选） |
| polish        | bool     | 是否先润色（可选，默认 false）               |

**成功响应 JSON 示例**

```
{
  "ok": true,
  "job_id": "job-1234567890",
  "prompt_used": "润色后的高质量提示词",
  "polished": true
}
```

**失败响应 JSON 示例**

```
{
  "ok": false,
  "error": "prompt is required"
}
```



------



**2. /api/submit-image**



**请求方式**

```
POST /api/submit-image
Content-Type: multipart/form-data
```

**表单字段**

| **字段**      | **类型** | **描述**                                     |
| ------------- | -------- | -------------------------------------------- |
| file          | file     | 本地图片文件（必填）                         |
| enable_pbr    | bool     | 是否启用 PBR（可选）                         |
| face_count    | int64    | 面数（可选）                                 |
| generate_type | string   | Normal / LowPoly / Geometry / Sketch（可选） |

**成功响应 JSON 示例**

```
{
  "ok": true,
  "job_id": "job-1234567890"
}
```

**失败响应 JSON 示例**

```
{
  "ok": false,
  "error": "file is required"
}
```



------





**3. /api/submit-image-url**

**请求方式**

```
POST /api/submit-image-url
Content-Type: application/json
```

**请求 JSON 示例**

```
{
  "image_url": "https://example.com/image.png",
  "enable_pbr": true,
  "face_count": 150000,
  "generate_type": "LowPoly"
}
```

**成功响应 JSON 示例**

```
{
  "ok": true,
  "job_id": "job-1234567890"
}
```

**失败响应 JSON 示例**

```
{
  "ok": false,
  "error": "image_url is required"
}
```



------





**4. /api/polish-prompt**

**请求方式**

```
POST /api/polish-prompt
Content-Type: application/json
```

**请求 JSON 示例**

```
{
  "prompt": "一个未来风格的机器人角色，带武器和光效"
}
```

**成功响应 JSON 示例**

```
{
  "ok": true,
  "polished_prompt": "高质量润色后的单行中文提示词"
}
```

**失败响应 JSON 示例**

```
{
  "ok": false,
  "error": "prompt is required"
}
```



------



**5. /api/status/:job_id**

**请求方式**

```
GET /api/status/job-1234567890
```

**成功响应 JSON 示例**

```
{
  "ok": true,
  "job_id": "job-1234567890",
  "status": "DONE",           // WAIT / RUN / FAIL / DONE
  "error_code": "",           // 失败时可能有错误码
  "error_message": "",        // 失败时可能有错误信息
  "files": [
    {
      "Type": "glb",
      "Url": "https://cdn.example.com/job-1234567890/model.glb",
      "PreviewImageUrl": "https://cdn.example.com/job-1234567890/preview.png"
    }
  ],
  "request_id": "req-abcdef123456"
}
```

**失败响应 JSON 示例**

```
{
  "ok": false,
  "error": "job not found"
}
```



------



**6. /api/download/:job_id/:idx**



**请求方式**

```
GET /api/download/job-1234567890/0
```



- 这里返回的是 **文件本身**，会触发浏览器下载
- idx 对应 files 数组中的索引，从 0 开始



**失败响应 JSON 示例**

```
{
  "ok": false,
  "error": "index out of range"
}
```



**7. 健康检查**

**请求方式**

```
GET /
```

**响应 JSON 示例**

```
{
  "ok": true,
  "service": "hunyuan3d"
}
```

